
<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="referrer" content="no-referrer">
    <title>æ·±æ¸¯è·¨å¢ƒ â†” ç´…æ©‹é›™å‘ç›£æ§</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-slate-900 text-slate-100 font-sans">
    <div class="container mx-auto p-4 max-w-5xl">
        <header class="mb-6 text-center border-b border-slate-700 pb-4">
            <h1 class="text-2xl font-bold text-blue-400">ğŸš¦ æ·±åœ³ç£/ç´…æ©‹ å¯¦æ™‚ç›£æ§å„€è¡¨æ¿</h1>
            <p class="text-xs text-slate-500 mt-2">CCTV æ¯ 2 åˆ†é˜åˆ·æ–° | å·´å£«æ•¸æ“šæ¯ 1 åˆ†é˜æ›´æ–°</p>
        </header>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <div class="bg-slate-800 p-4 rounded-xl shadow-xl border border-blue-500/30">
                <h2 class="text-blue-400 font-bold mb-3 flex justify-between">
                    <span>å¾€æ·±åœ³ç£å£å²¸ (B3X åŒ—è¡Œ)</span>
                    <span id="eta-north" class="text-emerald-400 font-mono">è¼‰å…¥ä¸­...</span>
                </h2>
                <div class="aspect-video bg-black rounded-lg overflow-hidden mb-3">
                    <img id="cctv-north" src="https://tdcctv.data.gov.hk/NT426F.JPG" referrerpolicy="no-referrer" class="w-full h-full object-cover">
                </div>
                <p class="text-[10px] text-slate-500 italic">CCTV ä½ç½®ï¼šç´…æ©‹ç«™å¾€å£å²¸æ–¹å‘</p>
            </div>

            <div class="bg-slate-800 p-4 rounded-xl shadow-xl border border-orange-500/30">
                <h2 class="text-orange-400 font-bold mb-3 flex justify-between">
                    <span>å¾€å±¯é–€/ä¹é¾ (B3X å—è¡Œ)</span>
                    <span id="eta-south" class="text-emerald-400 font-mono">è¼‰å…¥ä¸­...</span>
                </h2>
                <div class="aspect-video bg-black rounded-lg overflow-hidden mb-3">
                    <img id="cctv-south" src="https://tdcctv.data.gov.hk/NT423F.JPG" referrerpolicy="no-referrer" class="w-full h-full object-cover">
                </div>
                <p class="text-[10px] text-slate-500 italic">CCTV ä½ç½®ï¼šå±¯é–€å…¬è·¯è¿‘æ–°å¢Ÿ (å¾€ä¹é¾æ–¹å‘)</p>
            </div>
        </div>
    </div>

    <script>
        async function fetchETA(stopId, elementId) {
            const proxy = "https://corsproxy.io/?";
            const url = `${proxy}https://rt.data.gov.hk/v2/transport/citybus/eta/CTB/${stopId}/B3X`;
            try {
                const response = await fetch(url);
                const json = await response.json();
                if (json.data && json.data.length > 0) {
                    const nextBus = json.data[0];
                    const diff = Math.round((new Date(nextBus.eta) - new Date()) / 60000);
                    const load = ["(ä½è¶³)", "(æœ‰ä¼ä½)", "(æ»¿è¼‰)"][nextBus.data_part_c] || "";
                    document.getElementById(elementId).innerText = (diff <= 0 ? "å³å°‡æŠµé”" : diff + " åˆ†é˜") + " " + load;
                }
            } catch (e) { document.getElementById(elementId).innerText = "æ•¸æ“šå»¶é²"; }
        }

        function refreshCCTV() {
            const t = new Date().getTime();
            document.getElementById('cctv-north').src = "https://tdcctv.data.gov.hk/NT426F.JPG?t=" + t;
            document.getElementById('cctv-south').src = "https://tdcctv.data.gov.hk/NT423F.JPG?t=" + t;
        }

        // å®šæ™‚åˆ·æ–°ï¼šå·´å£«æ•¸æ“š 60ç§’ï¼ŒCCTV 120ç§’
        setInterval(() => { fetchETA("003433", "eta-north"); fetchETA("001530", "eta-south"); }, 60000);
        setInterval(refreshCCTV, 120000);
        
        // åˆå§‹åŸ·è¡Œ
        fetchETA("003433", "eta-north"); fetchETA("001530", "eta-south");
    </script>
</body>
</html>
